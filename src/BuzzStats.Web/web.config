<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <section name="buzzStats" type="BuzzStats.Configuration.BuzzStatsConfigurationSection, BuzzStats" />
  </configSections>
  <appSettings>
    <!-- will only show google analytics if it's "live" -->
    <add key="environment" value="development" />
    <!--<add key="BuzzStats.CreateDb" value="true"/>-->
    <add key ="vs:EnableBrowserLink" value="false" />
  </appSettings>
  <connectionStrings>
    <!-- MySQL -->
    <add name="BuzzStats" providerName="mysql" connectionString="Server=192.168.2.1;Database=BuzzStatsLive;Uid=$(Uid);Pwd=$(Pwd);Charset=utf8;Convert Zero Datetime=True;Pooling=False" />
    <!--<add name="BuzzStats" providerName="sqlite" connectionString="~/App_Data/BuzzStats.sqlite" />-->
  </connectionStrings>
  <buzzStats>
    <web disableCache="false" />
    <crawler webServicesPrefix="http://localhost:8422/BuzzStats/" />
  </buzzStats>
  <log4net>
    <appender name="SmtpAppender" type="NGSoftware.Common.log4net.SmtpAppender, NGSoftware.Common">
      <to value="ngeor@ngeor.net" />
      <from value="no-reply@ngeor.net" />
      <subject value="dev.ngeor.net BuzzStats Exception" />
      <threshold value="ERROR" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date [%thread] %-5level %logger - %newline%message%newline%exception%newline%newline" />
      </layout>
    </appender>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="BuzzStats.Web.log" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="1000KB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <!-- <appender-ref ref="SmtpAppender" /> -->
      <appender-ref ref="RollingFileAppender" />
    </root>
    <logger name="BuzzStats.Web.Global">
      <level value="DEBUG" />
    </logger>
    <logger name="BuzzStats.Data.NHibernate">
      <level value="DEBUG" />
    </logger>
    <logger
      name="BuzzStats.Services">
      <level
        value="INFO" />
    </logger>
    <logger name="NHibernate">
      <level value="WARN" />
    </logger>
  </log4net>
  <system.web>
    <compilation defaultLanguage="C#" debug="true" targetFramework="4.5.1">
      <assemblies>
        <add assembly="Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <add assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <customErrors mode="RemoteOnly" defaultRedirect="~/Error500.aspx">
      <error statusCode="404" redirect="~/Error404.aspx" />
    </customErrors>
    <authentication mode="Forms">
      <forms loginUrl="~/Login.aspx" defaultUrl="~/Default.aspx">
        <credentials passwordFormat="Clear">
          <user name="$(AdminUsername)" password="$(AdminPwd)" />
        </credentials>
      </forms>
    </authentication>
    <authorization>
      <allow users="*" />
    </authorization>
    <trace enabled="false" localOnly="true" pageOutput="true" requestLimit="10" traceMode="SortByTime" />
    <sessionState mode="Off" cookieless="false" timeout="20" />
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="el-GR" uiCulture="el-GR" />
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <controls>
        <add assembly="SystemWebCompanion" namespace="System.Web.Companion.UI.WebControls" tagPrefix="swc" />
      </controls>
    </pages>
    <membership>
      <providers>
        <clear />
      </providers>
    </membership>
    <roleManager enabled="false" cacheRolesInCookie="false">
      <providers>
        <clear />
      </providers>
    </roleManager>
    <siteMap enabled="false">
      <providers>
        <clear />
      </providers>
    </siteMap>
    <webServices>
      <protocols>
        <add name="HttpPost" />
        <add name="HttpGet" />
      </protocols>
    </webServices>
    <caching>
      <outputCache enableOutputCache="false" />
    </caching>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ICrawlerService" />
        <binding name="BasicHttpBinding_IWebApiService" />
      </basicHttpBinding>
    </bindings>
    <client>
    </client>
  </system.serviceModel>
  <!--  <system.diagnostics>
<trace autoflush="true" />
<sources>
    <source name="System.ServiceModel"              switchValue="Information, ActivityTracing"              propagateActivity="true">
        <listeners>
            <add name="traceListener"            type="System.Diagnostics.XmlWriterTraceListener"            initializeData= "C:\logs\BuzzStatsTraces.svclog" />
        </listeners>
    </source>
</sources>
</system.diagnostics>  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <!-- Enable the staticContent section below to add Expires headers to images for better performance.         Some hosting providers does not allow the staticContent section to be set. -->
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="365.00:00:00" cacheControlCustom="public" />
      <remove fileExtension=".ico" />
      <mimeMap fileExtension=".ico" mimeType="image/x-icon" />
    </staticContent>
    <modules runAllManagedModulesForAllRequests="true" />
    <!-- Enable the httpProtocol section below to manipulate some HTTP headers.         Some hosting providers does not allow the httpProtocol section to be set. -->
    <!--    <httpProtocol>
    <customHeaders>
        <remove name="X-Powered-By" />
        <add name="Etag" value=" " />
    </customHeaders>
</httpProtocol>    -->
    <!-- enables compression in IIS 7    <urlCompression doDynamicCompression="true" doStaticCompression="true" dynamicCompressionBeforeCache="true"/>    -->
  </system.webServer>
  <system.net>
    <mailSettings>
      <smtp deliveryMethod="network" from="no-reply@ngeor.net">
        <network host="localhost" />
      </smtp>
    </mailSettings>
  </system.net>
  <location path="Admin">
    <system.web>
      <authorization>
        <deny users="?" />
        <allow users="admin" />
      </authorization>
    </system.web>
  </location>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.2.15.0" newVersion="1.2.15.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Iesi.Collections" publicKeyToken="aa95f207798dfdb4" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="NHibernate" publicKeyToken="aa95f207798dfdb4" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.4000" newVersion="4.0.0.4000" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.8.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
  </system.data>
</configuration>
